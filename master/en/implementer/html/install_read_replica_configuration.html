<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>8.8.&nbsp;Read replica database configuration</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="dhis2_implementation_guide.html" title="DHIS2 Implementation Guide"><link rel="up" href="installation.html" title="Chapter&nbsp;8.&nbsp;Installation"><link rel="prev" href="install_encryption_configuration.html" title="8.7.&nbsp;Encryption configuration"><link rel="next" href="install_web_server_cluster_configuration.html" title="8.9.&nbsp;Web server cluster configuration"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8.8.&nbsp;Read replica database configuration</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="install_encryption_configuration.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;8.&nbsp;Installation</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="install_web_server_cluster_configuration.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install_read_replica_configuration"></a>8.8.&nbsp;Read replica database configuration</h2></div></div></div><p>DHIS 2 allows for utilizing read only replicas of the master database (the main DHIS 2
        database). The purpose of read replicas is to enhance the performance of database read
        queries and scale out the capacity beyond the constraints of a single database. Read-heavy
        operations such as analytics and event queries will benefit from this.</p><p>The configuration requires that you have created one or more replicated instances of the
        master DHIS 2 database. PostgreSQL achieves this through a concept referred to as
          <span class="emphasis"><em>streaming replication</em></span>. Configuring read replicas for PostgreSQL is
        not covered in this guide.</p><p>Read replicas can be defined in the <span class="emphasis"><em>dhis.conf</em></span> configuration file.
        You can specify up to 5 read replicas per DHIS 2 instance. Each read replica is denoted with
        a number between 1 and 5. The JDBC connection URL must be defined per replica. The username
        and password can be specified; if not, the username and password for the master database
        will be used instead.</p><p>The configuration for read replicas in <span class="emphasis"><em>dhis.conf</em></span> looks like the
        below. Each replica is specified with the configuration key <span class="emphasis"><em>readN</em></span>
        prefix, where N refers to the replica
        number.</p><pre class="screen"># Read replica 1 configuration

# Database connection URL, username and password
read1.connection.url = jdbc:postgresql://127.0.0.11/dbread1
read1.connection.username = dhis
read1.connection.password = xxxx

# Read replica 2 configuration

# Database connection URL, username and password
read2.connection.url = jdbc:postgresql://127.0.0.12/dbread2
read2.connection.username = dhis
read2.connection.password = xxxx

# Read replica 3 configuration

# Database connection URL, fallback to master for username and password
read3.connection.url = jdbc:postgresql://127.0.0.13/dbread3</pre><p>Note that you must restart your servlet container for the changes to take effect. DHIS 2
        will automatically distribute the load across the read replicas. The ordering of replicas
        has no significance.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="install_encryption_configuration.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="installation.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="install_web_server_cluster_configuration.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">8.7.&nbsp;Encryption configuration&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_implementation_guide.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;8.9.&nbsp;Web server cluster configuration</td></tr></table></div></body></html>