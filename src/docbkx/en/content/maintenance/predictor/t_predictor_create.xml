<?xml version='1.0' encoding='UTF-8'?>
<section version="5.0"
    xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd"
    xmlns="http://docbook.org/ns/docbook" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xl="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:svg="http://www.w3.org/2000/svg" xmlns:mth="http://www.w3.org/1998/Math/MathML"
    xmlns:db="http://docbook.org/ns/docbook"
    xml:id="create_predictor">
    <title>Create or edit a predictor</title>
    <orderedlist>
        <listitem>
            <para>Open the <emphasis role="bold">Maintenance</emphasis> app and click <emphasis
                    role="bold">Other</emphasis> > <emphasis role="bold"
                >Predictor</emphasis>.</para>
        </listitem>
        <listitem>
            <para>Click the add button.</para>
        </listitem>
        <listitem>
            <para>In the <emphasis role="bold">Name</emphasis> field, type the predictor
                name.</para>
        </listitem>
        <listitem>
            <para>(Optional) In the <emphasis role="bold">Code</emphasis> field, assign a
                code.</para>
        </listitem>
        <listitem>
            <para>(Optional) Type a <emphasis role="bold">Description</emphasis>.</para>
        </listitem>
        <listitem>
            <para>Select an <emphasis role="bold">Output data element</emphasis>.
                Values generated by this predictor are stored as aggregate data
                associated with this data element and the predicted period.</para>
            <para>The value is rounded according to the value type
                of the data element: If the value type is an integer type, the
                predicted value is rounded to the nearest integer. For all other
                value types, the number is rounded to four significant digits.
                (However if there are more than four digits to the left of the
                decimal place, they are not replaced with zeros.)</para>
        </listitem>
        <listitem>
            <para>Select a <emphasis role="bold">Period type</emphasis>.</para>
        </listitem>
        <listitem>
            <para>Assign one or more organisation unit levels.
                The ouput value will be assigned to an organisation unit at this
                level (or these levels). The input values will come from the
                organisaiton unit to which the output is assigned, or from any
                level lower under the output organisation unit.</para>
        </listitem>
        <listitem>
            <para>Create a <emphasis role="bold">Generator</emphasis>.
                The generator is the expression that is used to calculate the predicted
                value.</para>
            <orderedlist>
                <listitem>
                    <para>Type a <emphasis role="bold">Description</emphasis> of the
                        generator expression.</para>
                </listitem>
                <listitem>
                    <para>Enter the generator expression. You can build the expression by selecting
                        data elements for aggregate data, or program data elements, attributes
                        or indicators. Organisation unit counts are not yet supported.</para>
                    <para>To use sampled, past period data, you should enclose any items
                        you select in one of the following aggregate functions:</para>
                    <informaltable frame="all">
                        <tgroup cols="2">
                            <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                            <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                            <thead>
                                <row>
                                    <entry>
                                        <para>Aggregate function</para>
                                    </entry>
                                    <entry>
                                        <para>Means</para>
                                    </entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>
                                        <para>AVG</para>
                                    </entry>
                                    <entry>
                                        <para>Average (mean) value</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <para>COUNT</para>
                                    </entry>
                                    <entry>
                                        <para>Count of the data values</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <para>MAX</para>
                                    </entry>
                                    <entry>
                                        <para>Maximum value</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <para>MEDIAN</para>
                                    </entry>
                                    <entry>
                                        <para>Median value</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <para>MIN</para>
                                    </entry>
                                    <entry>
                                        <para>Minimum value</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <para>STDDEV</para>
                                    </entry>
                                    <entry>
                                        <para>Standard deviation</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <para>SUM</para>
                                    </entry>
                                    <entry>
                                        <para>Sum of the values</para>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                    <para>Any items inside an aggregate function will be evaluated for
                        all sampled past periods, and then combined according to the
                        formula inside the aggregate function. Any items outside an
                        aggregate function will be evaluated for the period in which
                        the prediction is being made.</para>
                    <para>You can build more complex expressions by clicking on (or typing) any
                        of the elements below the expression field: ( ) * / + - Days. Constant
                        numbers may be added by typing them. The
                        Days option inserts [days] into the expression which resolves to the
                        number of days in the period from which the data came.</para>
                    <para>You can also use the following functions in your expression,
                        either inside or containing aggregate functions,
                        or independent of them:</para>
                    <informaltable frame="all">
                        <tgroup cols="2">
                            <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                            <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                            <thead>
                                <row>
                                    <entry>
                                        <para>Function</para>
                                    </entry>
                                    <entry>
                                        <para>Means</para>
                                    </entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry align="left">
                                        <para>IF(test, valueIfTrue, valueIfFalse)</para>
                                    </entry>
                                    <entry>
                                        <para>Evaluates <emphasis role="bold">test</emphasis>
                                            which is an expression that evaluates to a boolean value -- see
                                            <emphasis role="bold">Boolean expression notes</emphasis>
                                            below. If the test is <emphasis role="bold">true</emphasis>,
                                            returns the <emphasis role="bold">valueIfTrue</emphasis>
                                            expression. If it is <emphasis role="bold">false</emphasis>,
                                            returns the <emphasis role="bold">valueIfFalse</emphasis>
                                            expression.</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>ISNULL(item)</para>
                                    </entry>
                                    <entry>
                                        <para>Returns the boolean value <emphasis role="bold">true</emphasis>
                                            if the <emphasis role="bold">item</emphasis>
                                            is null (missing), otherwise returns
                                            <emphasis role="bold">false</emphasis>. The
                                            <emphasis role="bold">item</emphasis> can
                                            be any selected item from the right (data element,
                                            program data element, etc.).
                                        </para>
                                    </entry>
                                </row>
                             </tbody>
                        </tgroup>
                    </informaltable>
                    <para><emphasis role="bold">Boolean expression notes:</emphasis> A boolean
                        expression must evaluate to <emphasis role="bold">true</emphasis>
                        or <emphasis role="bold">false</emphasis>. The following operators may be used to compare two
                        values resulting in a boolean expression: &lt;, >, !=, ==, >=, and &lt;=. The
                        following operators may be used to combine two boolean expressions: &amp;&amp;
                        (logical and), and || (logical or). The unary operator ! may be used to negate a
                        boolean expression.</para>
                    <para>Generator expression examples:</para>
                    <informaltable frame="all">
                        <tgroup cols="2">
                            <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                            <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                            <thead>
                                <row>
                                    <entry>
                                        <para>Generator expression</para>
                                    </entry>
                                    <entry>
                                        <para>Means</para>
                                    </entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry align="left">
                                        <para>SUM(#{FTRrcoaog83.tMwM3ZBd7BN})</para>
                                    </entry>
                                    <entry>
                                        <para>Sum of the sampled values of data element
                                            FTRrcoaog83 and category option combination
                                            (disaggregation) tMwM3ZBd7BN</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>AVG(#{FTRrcoaog83}) + 2 *
                                            STDDEV(#{FTRrcoaog83})</para>
                                    </entry>
                                    <entry>
                                        <para>Average of the sampled values of of data
                                            element FTRrcoaog83 (sum of all disaggregations)
                                            plus twice its standard
                                            deviation</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>SUM(#{FTRrcoaog83}) / SUM([days])</para>
                                    </entry>
                                    <entry>
                                        <para>Sum of all sampled values of data element
                                            FTRrcoaog83 (sum of all disaggregations)
                                            divided by the number of days
                                            in all sample periods (resulting in
                                            the overall average daily value)</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>SUM(#{FTRrcoaog83}) + #{T7OyqQpUpNd}</para>
                                    </entry>
                                    <entry>
                                        <para>Sum of all sampled values of data element
                                            FTRrcoaog83 plus the value of data element
                                            T7OyqQpUpNd in the period being predicted for
                                        </para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>1.2 * #{T7OyqQpUpNd}</para>
                                    </entry>
                                    <entry>
                                        <para>1.2 times the value of data element
                                            T7OyqQpUpNd in the period being predicted for
                                        </para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>IF(ISNULL(#{T7OyqQpUpNd}), 10, 20)</para>
                                    </entry>
                                    <entry>
                                        <para>If the data element T7OyqQpUpNd is null,
                                            then 10, otherwise 20.</para>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
            </orderedlist>
        </listitem>
        <listitem>
            <para>(Optional) Create a <emphasis role="bold">Sample skip test</emphasis>.
                The sample skip test tells which previous periods if any to exclude
                from the sample.</para>
            <orderedlist>
                <listitem>
                    <para>Type a <emphasis role="bold">Description</emphasis> of the
                        skip test.</para>
                </listitem>
                <listitem>
                    <para>Enter the sample skip test expression. You can build the expression by selecting
                        data elements for aggregate data, or program data elements, attributes
                        or indicators. Organisation unit counts are not yet supported.
                        As with the generator function, you may click on (or type) any of the
                        elements below the expression field: ( ) * / + - Days.
                        The functions IF() and ISNULL() as described above may also be used.</para>
                    <para>The expression must evaluate to a boolean value of
                        <emphasis role="bold">true</emphasis> or <emphasis role="bold">false</emphasis>.
                         See <emphasis role="bold">Boolean expression notes</emphasis> above.</para>
                    <para>Skip test expression examples:</para>
                    <informaltable frame="all">
                        <tgroup cols="2">
                            <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                            <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                            <thead>
                                <row>
                                    <entry>
                                        <para>Skip test expression</para>
                                    </entry>
                                    <entry>
                                        <para>Means</para>
                                    </entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry align="left">
                                        <para>#{FTRrcoaog83} > #{M62VHgYT2n0}</para>
                                    </entry>
                                    <entry>
                                        <para>The value of data element FTRrcoaog83 (sum of all
                                            disaggregations) is greater than the value of data
                                            element M62VHgYT2n0 (sum of all disaggregations)</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>#{uF1DLnZNlWe} > 0</para>
                                    </entry>
                                    <entry>
                                        <para>The value of data element uF1DLnZNlWe
                                            (sum of all disaggregations) is greater than the zero</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left">
                                        <para>#{FTRrcoaog83} > #{M62VHgYT2n0} ||
                                            #{uF1DLnZNlWe} > 0</para>
                                    </entry>
                                    <entry>
                                        <para>The value of data element FTRrcoaog83 (sum of all
                                            disaggregations) is greater than the value of data
                                            element M62VHgYT2n0 (sum of all disaggregations) or
                                            the value of data element uF1DLnZNlWe (sum of all
                                            disaggregations) is greater than the zero</para>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
            </orderedlist> 
        </listitem>
        <listitem>
            <para>Enter a <emphasis role="bold">Sequential sample count</emphasis> value.</para>
            <para>This is for how many sequential periods the calculation should go back
                in time to sample data for the calculations.</para>
        </listitem>
        <listitem>
            <para>Enter an <emphasis role="bold">Annual sample count</emphasis> value.</para>
            <para>This is for how many years the calculation should go back in time to
                sample data for the calculations.</para>
        </listitem>
        <listitem>
            <para>(Optional) Enter a <emphasis role="bold">Sequential skip count</emphasis>
                value.</para>
            <para>This is how many sequential periods, immediately preceding the predicted value
                period, should be skipped before sampling the data.</para>
        </listitem>
        <listitem>
            <para>Click <emphasis role="bold">Save</emphasis>.</para>
        </listitem>
    </orderedlist>
</section>
